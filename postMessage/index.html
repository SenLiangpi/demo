<!--
 * @Author: Pi Patle
 * @Email: pisenliang@gmail.com
 * @Github: https://github.com/SenLiangpi
 * @Website: https://senliangpi.github.io/blog/#/
 * @Date: 2023-02-16 17:25:06
 * @LastEditors: Pi Patle
 * @LastEditTime: 2023-02-16 17:28:28
-->
<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <title>iframe 跨域交互测试</title>
  <style>
  </style>
</head>

<body>
  <div style="height:100%;-webkit-overflow-scrolling:touch;overflow:auto;">
    <iframe src="https://senliangpi.github.io/demo/iframe" style="height:99.4%;width:100%;" frameborder="0" id="iframeBox"></iframe>
  </div>
</body>
<script>
window.addEventListener("message", (data)=>{
  const iFrame = document.getElementById('iframeBox');
  switch (data.data.get) {
    case 'token':
      iFrame.contentWindow.postMessage({ get_name: 'token',data: 'token 回复' },'*');
      break;
    case 'accountId':
      iFrame.contentWindow.postMessage({ get_name: 'accountId',data: 'accountId 回复' },'*');
      break;
  }
}, false);
</script>

</html>